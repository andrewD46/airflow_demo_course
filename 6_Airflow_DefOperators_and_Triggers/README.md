<h1 align="center">Deferrable Operators & Triggers</h1>

<br>

>Отложенные операторы и триггеры основаны на более новых **asyncio** функциях и поэтому работают только на Python 3.7 или выше.


### Deferrable Operators (Отложенные операторы)

Стандартные **Operators** и **Sensors** занимают полный слот Воркера на все время работы, 
даже если они простаивают; например, если у вас есть только 100 Воркеров, 
доступных для запуска задач, и у вас есть 100 **DAG**, ожидающих Сенсора, который в 
данный момент работает, но простаивает, вы не можете запускать что-либо еще, даже 
если весь ваш кластер Airflow по существу простаивает. `reschedule` режим для датчиков 
решает некоторые из этих проблем, позволяя датчикам работать только с фиксированными 
интервалами, но он не гибок и позволяет использовать только время в качестве причины 
для возобновления работы.


Вот тут-то и появляются **Отложенные операторы**.

**Deferrable Operators** (Отложенные операторы) — это тот оператор, который 
написан с возможностью приостанавливать себя и освобождать Воркера, когда он знает, 
что должен ждать. 
В результате, пока он приостановлен (отложен), он не занимает рабочий слот, и ваш кластер 
будет тратить гораздо меньше ресурсов на бездействующих операторов или сенсоров.

### Triggers

**Триггеры** — это небольшие асинхронные фрагменты Python кода. 

Как работает этот процесс:

- Экземпляр задачи (работающий оператор) доходит до точки, где ему приходится ждать, и откладывает себя с помощью триггера, привязанного к событию, которое должно его возобновить. Это освобождает Воркера для запуска чего-то другого.

- Новый экземпляр триггера регистрируется внутри Airflow.

- Триггер запускается до тех пор, пока не сработает, после чего его исходная задача перепланируется.

- Планировщик ставит задачу в очередь для возобновления на рабочей ноде.


Подробную информацию про Отложенные операторы и Триггеры и о том, как их создавать
можно посмотреть в официальной документации: [Deferrable Operators & Triggers](https://airflow.apache.org/docs/apache-airflow/stable/concepts/deferring.html)

